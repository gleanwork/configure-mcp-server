"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const util = require("util");
const mock_console_1 = require("../mock-console");
const { test } = QUnit;
QUnit.module('mock-console', function () {
    test('mocks the console when called', function (assert) {
        let { resetConsole } = mock_console_1.default();
        assert.ok(util.types.isProxy(console));
        resetConsole();
    });
    test('resets the console when resetConsole called', function (assert) {
        let { resetConsole } = mock_console_1.default();
        assert.ok(util.types.isProxy(console));
        resetConsole();
        assert.notOk(util.types.isProxy(console));
    });
    test('resets the console when resetConsole called via destructor', function (assert) {
        let { resetConsole } = mock_console_1.default();
        assert.ok(util.types.isProxy(console));
        resetConsole();
        assert.notOk(util.types.isProxy(console));
    });
    test('captures state when console methods are called', function (assert) {
        let { resetConsole, consoleState } = mock_console_1.default();
        console.log('This is a message');
        assert.equal(consoleState.getState('log'), 'This is a message');
        resetConsole();
    });
    test('throws when invalid console methods are retrieved from state', function (assert) {
        let { resetConsole, consoleState } = mock_console_1.default();
        console.log('This is a message');
        assert.throws(() => {
            consoleState.getState('foo');
        });
        resetConsole();
    });
    test('captures state when console methods are called repeatedly', function (assert) {
        let { resetConsole, consoleState } = mock_console_1.default();
        console.log('This is a message');
        console.log('And so is this');
        assert.equal(consoleState.getState('log'), `This is a message
And so is this`);
        resetConsole();
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay1jb25zb2xlLXRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdGVzdHMvbW9jay1jb25zb2xlLXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNkI7QUFFN0Isa0RBQTBDO0FBRTFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUM7QUFFdkIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUU7SUFDM0IsSUFBSSxDQUFDLCtCQUErQixFQUFFLFVBQVMsTUFBTTtRQUNuRCxJQUFJLEVBQUUsWUFBWSxFQUFFLEdBQUcsc0JBQVcsRUFBRSxDQUFDO1FBRXJDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUV2QyxZQUFZLEVBQUUsQ0FBQztJQUNqQixDQUFDLENBQUMsQ0FBQztJQUVILElBQUksQ0FBQyw2Q0FBNkMsRUFBRSxVQUFTLE1BQU07UUFDakUsSUFBSSxFQUFFLFlBQVksRUFBRSxHQUFHLHNCQUFXLEVBQUUsQ0FBQztRQUVyQyxNQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFFdkMsWUFBWSxFQUFFLENBQUM7UUFFZixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDNUMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsNERBQTRELEVBQUUsVUFBUyxNQUFNO1FBQ2hGLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxzQkFBVyxFQUFFLENBQUM7UUFFckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBRXZDLFlBQVksRUFBRSxDQUFDO1FBRWYsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzVDLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLGdEQUFnRCxFQUFFLFVBQVMsTUFBTTtRQUNwRSxJQUFJLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxHQUFHLHNCQUFXLEVBQUUsQ0FBQztRQUVuRCxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFakMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLG1CQUFtQixDQUFDLENBQUM7UUFFaEUsWUFBWSxFQUFFLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsOERBQThELEVBQUUsVUFBUyxNQUFNO1FBQ2xGLElBQUksRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLEdBQUcsc0JBQVcsRUFBRSxDQUFDO1FBRW5ELE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUVqQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNqQixZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO1FBRUgsWUFBWSxFQUFFLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLENBQUMsMkRBQTJELEVBQUUsVUFBUyxNQUFNO1FBQy9FLElBQUksRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLEdBQUcsc0JBQVcsRUFBRSxDQUFDO1FBRW5ELE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNqQyxPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFFOUIsTUFBTSxDQUFDLEtBQUssQ0FDVixZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUM1QjtlQUNTLENBQ1YsQ0FBQztRQUVGLFlBQVksRUFBRSxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB1dGlsIGZyb20gJ3V0aWwnO1xuXG5pbXBvcnQgbW9ja0NvbnNvbGUgZnJvbSAnLi4vbW9jay1jb25zb2xlJztcblxuY29uc3QgeyB0ZXN0IH0gPSBRVW5pdDtcblxuUVVuaXQubW9kdWxlKCdtb2NrLWNvbnNvbGUnLCBmdW5jdGlvbigpIHtcbiAgdGVzdCgnbW9ja3MgdGhlIGNvbnNvbGUgd2hlbiBjYWxsZWQnLCBmdW5jdGlvbihhc3NlcnQpIHtcbiAgICBsZXQgeyByZXNldENvbnNvbGUgfSA9IG1vY2tDb25zb2xlKCk7XG5cbiAgICBhc3NlcnQub2sodXRpbC50eXBlcy5pc1Byb3h5KGNvbnNvbGUpKTtcblxuICAgIHJlc2V0Q29uc29sZSgpO1xuICB9KTtcblxuICB0ZXN0KCdyZXNldHMgdGhlIGNvbnNvbGUgd2hlbiByZXNldENvbnNvbGUgY2FsbGVkJywgZnVuY3Rpb24oYXNzZXJ0KSB7XG4gICAgbGV0IHsgcmVzZXRDb25zb2xlIH0gPSBtb2NrQ29uc29sZSgpO1xuXG4gICAgYXNzZXJ0Lm9rKHV0aWwudHlwZXMuaXNQcm94eShjb25zb2xlKSk7XG5cbiAgICByZXNldENvbnNvbGUoKTtcblxuICAgIGFzc2VydC5ub3RPayh1dGlsLnR5cGVzLmlzUHJveHkoY29uc29sZSkpO1xuICB9KTtcblxuICB0ZXN0KCdyZXNldHMgdGhlIGNvbnNvbGUgd2hlbiByZXNldENvbnNvbGUgY2FsbGVkIHZpYSBkZXN0cnVjdG9yJywgZnVuY3Rpb24oYXNzZXJ0KSB7XG4gICAgbGV0IHsgcmVzZXRDb25zb2xlIH0gPSBtb2NrQ29uc29sZSgpO1xuXG4gICAgYXNzZXJ0Lm9rKHV0aWwudHlwZXMuaXNQcm94eShjb25zb2xlKSk7XG5cbiAgICByZXNldENvbnNvbGUoKTtcblxuICAgIGFzc2VydC5ub3RPayh1dGlsLnR5cGVzLmlzUHJveHkoY29uc29sZSkpO1xuICB9KTtcblxuICB0ZXN0KCdjYXB0dXJlcyBzdGF0ZSB3aGVuIGNvbnNvbGUgbWV0aG9kcyBhcmUgY2FsbGVkJywgZnVuY3Rpb24oYXNzZXJ0KSB7XG4gICAgbGV0IHsgcmVzZXRDb25zb2xlLCBjb25zb2xlU3RhdGUgfSA9IG1vY2tDb25zb2xlKCk7XG5cbiAgICBjb25zb2xlLmxvZygnVGhpcyBpcyBhIG1lc3NhZ2UnKTtcblxuICAgIGFzc2VydC5lcXVhbChjb25zb2xlU3RhdGUuZ2V0U3RhdGUoJ2xvZycpLCAnVGhpcyBpcyBhIG1lc3NhZ2UnKTtcblxuICAgIHJlc2V0Q29uc29sZSgpO1xuICB9KTtcblxuICB0ZXN0KCd0aHJvd3Mgd2hlbiBpbnZhbGlkIGNvbnNvbGUgbWV0aG9kcyBhcmUgcmV0cmlldmVkIGZyb20gc3RhdGUnLCBmdW5jdGlvbihhc3NlcnQpIHtcbiAgICBsZXQgeyByZXNldENvbnNvbGUsIGNvbnNvbGVTdGF0ZSB9ID0gbW9ja0NvbnNvbGUoKTtcblxuICAgIGNvbnNvbGUubG9nKCdUaGlzIGlzIGEgbWVzc2FnZScpO1xuXG4gICAgYXNzZXJ0LnRocm93cygoKSA9PiB7XG4gICAgICBjb25zb2xlU3RhdGUuZ2V0U3RhdGUoJ2ZvbycpO1xuICAgIH0pO1xuXG4gICAgcmVzZXRDb25zb2xlKCk7XG4gIH0pO1xuXG4gIHRlc3QoJ2NhcHR1cmVzIHN0YXRlIHdoZW4gY29uc29sZSBtZXRob2RzIGFyZSBjYWxsZWQgcmVwZWF0ZWRseScsIGZ1bmN0aW9uKGFzc2VydCkge1xuICAgIGxldCB7IHJlc2V0Q29uc29sZSwgY29uc29sZVN0YXRlIH0gPSBtb2NrQ29uc29sZSgpO1xuXG4gICAgY29uc29sZS5sb2coJ1RoaXMgaXMgYSBtZXNzYWdlJyk7XG4gICAgY29uc29sZS5sb2coJ0FuZCBzbyBpcyB0aGlzJyk7XG5cbiAgICBhc3NlcnQuZXF1YWwoXG4gICAgICBjb25zb2xlU3RhdGUuZ2V0U3RhdGUoJ2xvZycpLFxuICAgICAgYFRoaXMgaXMgYSBtZXNzYWdlXG5BbmQgc28gaXMgdGhpc2BcbiAgICApO1xuXG4gICAgcmVzZXRDb25zb2xlKCk7XG4gIH0pO1xufSk7XG4iXX0=